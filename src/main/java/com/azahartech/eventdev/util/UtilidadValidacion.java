package com.azahartech.eventdev.util;

import java.time.LocalDate;

public class UtilidadValidacion {
    /**
     *
     * @param email
     * Sirve para la validacion del email.
     * @return
     */
    public static boolean esEmailValido(String email) {
        return email.matches("[a-zA-Z0-9\\.]+@[a-zA-Z0-9\\.]+\\.[a-z]{2,4}");
    }

    /**
     * @param fecha
     * Comprueba que la fecha de un evento sea futura.
     * */
    public static boolean esFechaFutura(LocalDate fecha) {
        if (fecha == null) {
            return false;
        } else {
            return fecha.isAfter(LocalDate.now());
        }
    }
    /**
     * Valida si un telefono tiene 9 digitos
     * @param telefono
     * @return
     */
    public static boolean esTelefonoValido(String telefono) {
        return telefono.matches("^[0-9]{9}");
    }

    /**
     * Este metodo genera un ID Automaticamente
     *
     * Formato:
     * 1 Palabra: Los 5 primeros caracteres
     * 5 Palabra: Cada sigla de una palabra
     *
     * @param nombre
     * @return devuelve un ID
     */
    public static String generaraIdAutomatico(String nombre){
        String resultado;

        final String PREDETERMINADO = "DEFAU";
        nombre = (nombre != null && nombre != "") ? nombre : PREDETERMINADO;

        int año = LocalDate.now().getYear();
        String siglas;

        String[] partesDeNombre = nombre.split(" ");

        switch (partesDeNombre.length){
            case 1:
                siglas = nombre.substring(0, (nombre.length() > 5)? 5: nombre.length()).toUpperCase();
                break;

            case 2:
                siglas = (partesDeNombre[0].substring(0, (partesDeNombre[0].length() >= 3) ? 3 : partesDeNombre.length) +
                          partesDeNombre[1].substring(0, (partesDeNombre[1].length() >= 2) ? 2 : partesDeNombre.length)).toUpperCase();
                break;

            case 3:
                siglas = (partesDeNombre[0].substring(0, (partesDeNombre[0].length() >= 2) ? 2 : partesDeNombre.length) +
                          partesDeNombre[1].substring(0, (partesDeNombre[1].length() >= 2) ? 2 : partesDeNombre.length) +
                          partesDeNombre[2].substring(0, (partesDeNombre[2].length() >= 1) ? 1 : partesDeNombre.length)).toUpperCase();
                break;

            case 4:
                siglas = (partesDeNombre[0].substring(0, (partesDeNombre[0].length() >= 2) ? 2 : partesDeNombre.length) +
                          partesDeNombre[1].substring(0, (partesDeNombre[1].length() >= 1) ? 1 : partesDeNombre.length) +
                          partesDeNombre[2].substring(0, (partesDeNombre[2].length() >= 1) ? 1 : partesDeNombre.length) +
                          partesDeNombre[3].substring(0, (partesDeNombre[3].length() >= 1) ? 1 : partesDeNombre.length)).toUpperCase();
                break;

            case 5:
            default:
                siglas = (partesDeNombre[0].substring(0, (partesDeNombre[0].length() >= 1) ? 1 : partesDeNombre.length) +
                          partesDeNombre[1].substring(0, (partesDeNombre[1].length() >= 1) ? 1 : partesDeNombre.length) +
                          partesDeNombre[2].substring(0, (partesDeNombre[2].length() >= 1) ? 1 : partesDeNombre.length) +
                          partesDeNombre[3].substring(0, (partesDeNombre[3].length() >= 1) ? 1 : partesDeNombre.length) +
                          partesDeNombre[4].substring(0, (partesDeNombre[4].length() >= 1) ? 1 : partesDeNombre.length)).toUpperCase();
                break;
        }


        resultado = String.format("EVT-%s-%s", año, siglas);

        return resultado;
    }
}
